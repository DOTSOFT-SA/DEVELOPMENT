# ML-App
### Δημιουργία και αποθήκευση εκπαιδευμένων ML Μοντέλων στη βάση δεδομένων της DOTSOFT

## Περιγραφή
Η διαδικασία πρόβλεψης της ζήτησης (SKU ποσοτήτων) διαχωρίζεται σε δύο φάσεις, `training` και `inference`. Ο στόχος του app είναι, σε προκαθορισμένα χρονικά διαστήματα (με τη χρήση `scheduler` - π.χ., ανά εβδομάδα), να αντλεί τις απαραίτητες πληροφορίες από το ERP σύστημα του πελάτη και το `sku_metric` πίνακα, ώστε να εκπαιδεύει και να αποθηκεύει τα μοντέλα Μηχανικής Μάθησης στη `PostgreSQL` βάση της DOTSOFT. Το συγκεκριμένο δεν απευθύνεται στη φάση του `inference`, αυτό είναι ευθύνη του Development [Web App](https://bitbucket.org/dotsoft-sa/development-backend-2/src/main/development-web-app/development-backend/backend/api/services/facades/model_inference_service_facade.py).

**<u>Προσοχή</u>:** όχι για `inventory` και `routing`, **μόνο για προβέψεις της `ζήτησης`**.

## Δομή του Project
Το `ML-App` αποτελείται από τα παρακάτω βασικά μέρη:

- `prediction.py`: Περιλαμβάνει τη διαδικασία εκπαίδευσης των μοντέλων.
- `scheduler_prediction.py`: Χρονικοπρογραμματισμός (scheduler) για την αυτόματη εκτέλεση της πρόβλεψης (π.χ., κάθε εβδομάδα).
- `repositories/`: Περιέχει τα repositories για την αποθήκευση και ανάκτηση δεδομένων από τη βάση PostgreSQL.
- `services/`: Περιλαμβάνει τις υπηρεσίες που διαχειρίζονται την επεξεργασία δεδομένων πριν την εκπαίδευση.
- `utils/`: Περιέχει βοηθητικά αρχεία για ρυθμίσεις, διαχείριση της βάσης δεδομένων και επικοινωνία με APIs.

## Εκπαίδευση Μοντέλου (Βήματα)
1. Ανάκτηση δεδομένων από το ERP και τη βάση δεδομένων.
2. Προ-επεξεργασία δεδομένων (imputation, κατηγοριοποίηση, normalization).
3. Εκπαίδευση πολλαπλών αλγορίθμων Μηχανικής Μάθησης.
4. Επιλογή του βέλτιστου μοντέλου με βάση το `Mean Absolute Error (MAE)`.
5. Αποθήκευση του εκπαιδευμένου μοντέλου στη βάση δεδομένων (πίνακας `ml_model`).

---

## Πώς να Τρέξετε τo App Τοπικά

**Σημαντική σημείωση**: Βεβαιωθείτε ότι η `MySQL` βάση και το `EPR-fastapi` του `Dolibarr` ERP είναι ενεργά (δείτε περισσότερα [εδώ](https://bitbucket.org/dotsoft-sa/development-backend-2/src/69a1f5f995fd/development-erp/?at=main))

1.Δημιουργήστε ένα νέο (κενό) πρότζεκτ με το αγαπημένο σας IDE (π.χ., PyCharm)

2.Από το repository, κλωνοποιήστε/κατεβάστε τον φάκελο `ml-app` και μετακινήστε τα αρχεία του στο νέο πρότζεκτ

3.To αρχείο `.env` πρέπει να τοποθετηθεί στον root φάκελο του πρότζεκτ (βασιστείτε στο αρχείο `.env.sample`). <br> Tα αρχείο αυτό πρέπει να σας **δοθεί από τον υπεύθυνο του έργου**

3.Δημιουργήστε έναν `venv` φάκελο για το πρότζεκτ (δείτε πως [εδώ](https://stackoverflow.com/a/59895890))

4.Εκτελέστε την εντολή `pip install -r requirements.txt` για να εγκαταστήσετε τα απαραίτητα πακέτα/βιβλιοθήκες

5.Τρέξτε το αρχείο `prediction.py` **ή**, εναλλακτικά, εκτελέστε το αρχείο `scheduler_prediction.py` ώστε η διαδικασία να εκτελείται αυτόματα, π.χ., σε καθημερινή βάση. Εκτελέστε στον terminal την εντολή: `python prediction.py` ή `python scheduler_prediction.py` αντίστοιχα.
